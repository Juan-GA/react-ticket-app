(this["webpackJsonpticket-app"]=this["webpackJsonpticket-app"]||[]).push([[0],{186:function(e,t,c){},294:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(26),s=c.n(r),i=(c(186),c(37)),a=c(167),o=c(6),j=Object(n.createContext)(),l=function(e){var t=e.children,c=function(e){var t=Object(n.useMemo)((function(){return a.io.connect(e,{transports:["websocket"]})}),[e]),c=Object(n.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1];return Object(n.useEffect)((function(){o(t.connected)}),[t]),Object(n.useEffect)((function(){t.on("connect",(function(){o(!0)}))}),[t]),Object(n.useEffect)((function(){t.on("disconnect",(function(){o(!1)}))}),[t]),{socket:t,online:s}}("https://react-socket-ticket.herokuapp.com/"),r=c.socket,s=c.online;return Object(o.jsx)(j.Provider,{value:{socket:r,online:s},children:t})},b=Object(n.createContext)(),u=function(e){var t=e.children,c=Object(n.useState)(!1),r=Object(i.a)(c,2),s=r[0],a=r[1];return Object(o.jsx)(b.Provider,{value:{ocultarMenu:s,showMenu:function(){a(!1)},hideMenu:function(){a(!0)}},children:t})},O=c(297),d=c(304),x=c(308),h=c(309),m=c(310),p=c(66),f=c(24),g=c(94),k=c(301),v=c(296),y=c(300),I=c(303),S=c(302),C=c(178),T=c(306),E=function(e){var t=Object(n.useContext)(b),c=t.showMenu,r=t.hideMenu;Object(n.useEffect)((function(){e?r():c()}),[e,r,c])},w=function(){return{agente:localStorage.getItem("agente"),escritorio:localStorage.getItem("escritorio")}},F=k.a.Title,M=k.a.Text,N={labelCol:{span:8},wrapperCol:{span:14}},P={wrapperCol:{offset:8,span:14}},z=function(){var e=Object(f.g)(),t=Object(n.useState)(w()),c=Object(i.a)(t,1)[0];E(!1);return c.agente&&c.escritorio?Object(o.jsx)(f.a,{to:"/escritorio"}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(F,{level:2,children:"Ingresar"}),Object(o.jsx)(M,{children:"Ingrese su nombre y n\xfamero de escritorio"}),Object(o.jsx)(v.a,{}),Object(o.jsxs)(y.a,Object(g.a)(Object(g.a)({},N),{},{name:"basic",initialValues:{remember:!0},onFinish:function(t){var c=t.agente,n=t.escritorio;localStorage.setItem("agente",c),localStorage.setItem("escritorio",n),e.push("/escritorio")},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(o.jsx)(y.a.Item,{label:"Nombre del agente",name:"agente",rules:[{required:!0,message:"Por favor ingrese su nombre"}],children:Object(o.jsx)(I.a,{})}),Object(o.jsx)(y.a.Item,{label:"Escritorio",name:"escritorio",rules:[{required:!0,message:"Ingrese el n\xfamero de escritorio"}],children:Object(o.jsx)(S.a,{min:1,max:99})}),Object(o.jsx)(y.a.Item,Object(g.a)(Object(g.a)({},P),{},{children:Object(o.jsxs)(C.a,{type:"primary",htmlType:"submit",shape:"round",children:[Object(o.jsx)(T.a,{}),"Ingresar"]})}))]}))]})},q=c(81),A=c(44),H=c(298),J=c(299),B=c(305),K=c(138),U=c.n(K),V=c(173),W=function(){var e=Object(V.a)(U.a.mark((function e(){var t,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/ultimos");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c.ultimos);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=k.a.Title,G=k.a.Text,L=function(){E(!0);var e=Object(n.useContext)(j).socket,t=Object(n.useState)([]),c=Object(i.a)(t,2),r=c[0],s=c[1];return Object(n.useEffect)((function(){return e.on("ticket-asignado",(function(e){s(e)})),function(){e.off("ticket-asignado")}}),[e]),Object(n.useEffect)((function(){W().then((function(e){return s(e)}))}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D,{level:1,children:"Atendiendo al cliente"}),Object(o.jsxs)(q.a,{children:[Object(o.jsx)(A.a,{span:12,children:Object(o.jsx)(H.b,{dataSource:r.slice(0,3),renderItem:function(e){return Object(o.jsx)(H.b.Item,{children:Object(o.jsx)(J.a,{style:{width:300,marginTop:16},actions:[Object(o.jsxs)(B.a,{color:"volcano",children:[" ",e.agente]}),Object(o.jsxs)(B.a,{color:"magenta",children:[" Escritorio: ",e.escritorio]})],children:Object(o.jsxs)(D,{children:[" No. ",e.numero]})})})}})}),Object(o.jsxs)(A.a,{span:12,children:[Object(o.jsx)(v.a,{children:" Historial "}),Object(o.jsx)(H.b,{dataSource:r.slice(3),renderItem:function(e){return Object(o.jsx)(H.b.Item,{children:Object(o.jsx)(H.b.Item.Meta,{title:"Ticket No. ".concat(e.numero),description:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(G,{type:"secondary",children:"En el escritorio: "}),Object(o.jsx)(B.a,{color:"magenta",children:e.numero}),Object(o.jsx)(G,{type:"secondary",children:"Agente: "}),Object(o.jsx)(B.a,{color:"volcano",children:e.agente})]})})})}})]})]})]})},Q=c(307),R=k.a.Title,X=k.a.Text,Y=function(){E(!0);var e=Object(n.useContext)(j).socket,t=Object(n.useState)(null),c=Object(i.a)(t,2),r=c[0],s=c[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(q.a,{children:Object(o.jsxs)(A.a,{span:14,offset:6,align:"center",children:[Object(o.jsx)(R,{level:3,children:"Presione el bot\xf3n para un nuevo ticket"}),Object(o.jsx)(C.a,{type:"primary",shape:"round",icon:Object(o.jsx)(Q.a,{}),size:"large",onClick:function(){e.emit("solicitar-ticket",null,(function(e){s(e)}))},children:"Nuevo Ticket"})]})}),r&&Object(o.jsx)(q.a,{style:{marginTop:100},children:Object(o.jsxs)(A.a,{span:14,offset:6,align:"center",children:[Object(o.jsx)(X,{level:2,children:"Su n\xfamero"}),Object(o.jsx)("br",{}),Object(o.jsx)(X,{type:"success",style:{fontSize:55},children:r.numero})]})})]})},Z=c(181),$=c(93),_=k.a.Title,ee=k.a.Text,te=function(){E(!1);var e=Object(n.useState)(w()),t=Object(i.a)(e,1)[0],c=Object(n.useContext)(j).socket,r=Object(n.useState)(null),s=Object(i.a)(r,2),a=s[0],l=s[1],b=Object(f.g)();return t.agente&&t.escritorio?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(q.a,{children:[Object(o.jsxs)(A.a,{span:20,children:[Object(o.jsx)(_,{level:2,children:t.agente}),Object(o.jsx)(ee,{children:"Usted est\xe1 trabajando en el escritorio: "}),Object(o.jsx)(ee,{type:"success",children:t.escritorio})]}),Object(o.jsx)(A.a,{span:4,align:"right",children:Object(o.jsxs)(C.a,{shape:"round",type:"danger",onClick:function(){localStorage.clear(),b.replace("/ingresar")},children:[Object(o.jsx)(Z.a,{}),"Salir"]})})]}),Object(o.jsx)(v.a,{}),a&&Object(o.jsx)(q.a,{children:Object(o.jsxs)(A.a,{children:[Object(o.jsx)(ee,{children:"Est\xe1 atendiendo el ticket n\xfamero: "}),Object(o.jsx)(ee,{style:{fontSize:30},type:"danger",children:a.numero})]})}),Object(o.jsx)(q.a,{children:Object(o.jsx)(A.a,{offset:18,span:6,align:"right",children:Object(o.jsxs)(C.a,{onClick:function(){c.emit("siguiente-ticket-trabajar",t,(function(e){l(e)}))},shape:"round",type:"primary",children:[Object(o.jsx)($.a,{}),"Siguiente"]})})})]}):Object(o.jsx)(f.a,{to:"/ingresar"})},ce=O.a.Sider,ne=O.a.Content,re=function(){var e=Object(n.useContext)(b).ocultarMenu;return Object(o.jsx)(p.a,{children:Object(o.jsxs)(O.a,{style:{height:"100vh"},children:[Object(o.jsxs)(ce,{collapsedWidth:"0",breakpoint:"md",hidden:e,children:[Object(o.jsx)("div",{className:"logo"}),Object(o.jsxs)(d.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(o.jsx)(d.a.Item,{icon:Object(o.jsx)(x.a,{}),children:Object(o.jsx)(p.b,{to:"/ingresar",children:"Ingresar"})},"1"),Object(o.jsx)(d.a.Item,{icon:Object(o.jsx)(h.a,{}),children:Object(o.jsx)(p.b,{to:"/cola",children:"Cola de tickets"})},"2"),Object(o.jsx)(d.a.Item,{icon:Object(o.jsx)(m.a,{}),children:Object(o.jsx)(p.b,{to:"/crear",children:"Crear tickets"})},"3")]})]}),Object(o.jsx)(O.a,{className:"site-layout",children:Object(o.jsx)(ne,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280},children:Object(o.jsxs)(f.d,{children:[Object(o.jsx)(f.b,{path:"/ingresar",component:z}),Object(o.jsx)(f.b,{path:"/cola",component:L}),Object(o.jsx)(f.b,{path:"/crear",component:Y}),Object(o.jsx)(f.b,{path:"/escritorio",component:te}),Object(o.jsx)(f.a,{to:"/ingresar"})]})})})]})})},se=function(){return Object(o.jsx)(l,{children:Object(o.jsx)(u,{children:Object(o.jsx)(re,{})})})};s.a.render(Object(o.jsx)(se,{}),document.getElementById("root"))}},[[294,1,2]]]);
//# sourceMappingURL=main.bf8d45e2.chunk.js.map